#  NetWork
**:book: Contents**
+ [1. OSI 7계층]
+ [2. TCP/IP]
+ [3. TCP vs UDP]
  + [3-1. TCP]
  + [3-2. TCP의 3-way handshake 와 4-way handshake]
  + [3-3. UDP]
+ [4. HTTP vs HTTPS]
  + [4-1. HTTP]
  + [4-2. HTTPS]
+ [5. GET vs POST]
  + [5-1. GET]
  + [5-2. POST]
+ [6. Cookie(쿠키) vs Session(세션)]
  + [6-1. Cookie(쿠키)]
  + [6-2. Session(세션)]
+ [7. Rest 와 Restful]
  + [7-1. Rest]
  + [7-2. Rest API]
  + [7-3. Restful]

## 1. OSI 7계층
  + OSI (Open Systems Interconnection Reference Model)
    + 국제표준화기구(ISO)에서 개발한 모델, 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 설명한 것
    + 프로토콜을 기능별로 나눈 것이다.
    + 각 계층은 하위 계층의 기능만을 이요하고, 상위 계층에게 기능을 제공
  + [1. 물리계층 (Physical layer)]
    + 네트워크의 기본 네트워크 하드웨어 전송 기술을 이룬다.
    + 네트워크의 높은 수준의 기능의 논리 데이터 구조를 기초로 하는 필수 계층
    + 전송 단위는 Bit
  + [2. 데이터 링크 계층 (Data link layer)]
    + 장치 간 신호를 전달하는 물리 계층을 이용하여 네트워크 상의 주변 장치들 간 데이터 전송
    + 주소 할당 : 물리 계층으로부터 받은 신호들이 네트워크 상의 장치에 올바르게 안착할 수 있게 함
    + CRC 기반 오류 감지 : 신호가 전달되는 동안 오류가 포함되는지를 감지한다.
      ```
      CRC (Cyclic Redundancy Check)
        * 네트워크 등을 통하여 데이터를 전송할 때 전송된 데이터에 오류가 있는지를 확인하기 위한 체크값 결정 방식
        * 전송 전 데이터의 값에 따른 CRC 값을 붙여 전송, 전송 후 받은 데이터의 값으로 CRC 값 계산 후 비교( 다르면 오류)
      ```
    + 전송 단위는 프레임(Frame)
  + [3. 네트워크 계층 (Network layer)]
    + 라우팅(Routing)을 포함한 패킷 포워딩을 담당하는 계층
    + 라우팅(Routing) : 네트워크 안에서 데이터를 전송할 때 경로를 선택하는 과정
    + 패킷 포워딩(Forwarding) : 라우팅으로 저장된 경로에 패킷을 보내는 작업
    + 전송 단위는 패킷(Packet)
  + [4. 전송 계층 (Transport layer)]
    + 실사용자(end-to-end)가 신뢰성 있는 데이터를 주고 받을 수 있도록 해주는 계층
    + 상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해줌
    + 시퀀스 넘버 기반의 오류 제어 방식을 사용
      ```
      시퀀스 넘버
        * 통신과 제어에서 데이터를 관리하기 위해 번호를 부여
        * 해당 번호는 순서 역전 방지, 중복 패킷 방지 등으로 사용
      ```
    + 특정 연결의 유효성을 제어, 일부 프로토콜은 상태 개념이 있고(stateful), 연결 기반(connection oriented)
      <br> -> 패킷들의 전송이 유효한지 확인 후 전송 실패한 패킷들은 다시 전송
    + 전송 단위는 세그먼트(Segment)
  + [5. 세션 계층 (Session layer)]
    + 데이터 통신(송수신)을 관리하기 위한 방법을 제공하는 계층
    + 통신 방법 제공 : 동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(Full duplex)의 통신 제공
    + 체크 포인팅과 종료, 다시 시작 과정 등을 수행
    + TCP/IP 세션을 만들고 없애는 책임을 진다.
  + [6. 표현 계층 (Presentation layer)]
    + 네트워크의 데이터 번역자의 역할(응용 형식 -> 네트워크 형식, 네트워크 형식 -> 응용 형식)
    + MIME 인코딩이나 암호화 등의 동작이 이루어진다.
  + [7. 응용 계층 (Application layer)]
    + 응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행한다.

## 2. TCP/IP
  > https://brunch.co.kr/@wangho/6
  + TCP/IP
    + 패킷 통신 방식의 인터넷 프로토콜인 IP (인터넷 프로토콜)와 전송 조절 프로토콜인 TCP (전송 제어 프로토콜)로 이루어짐
    + IP는 복잡한 네트워크 망을 통하여 가장 효율적인 방법으로 데이터의 작은 조각들을 되도록 빨리 보내는 일
    + TCP는 데이터를 잘게 잘라 보내면서 순서가 맞지 않거나 중간에 빠진 부분을 점검하여 다시 요청
  + [1. 네트워크 연결 계층 (Network Access Layer)]
    + 데이터 단위 : 프레임(Frame), 전송 주소 : MAC 주소
    + 물리적으로 데이터가 네트워크를 통해 어떻게 전송되는지를 정의
      + 논리 주소(IP주소 등)이 아닌 물리주소(MAC주소)을 참조해 전송
      <br> MAC 주소(Media Access Control Address) : 컴퓨터의 하드웨어 주소
    + 기본적으로 에러검출 / 패킷의 프레임화 담당
  + [2. 인터넷 계층 (Internet Layer)]
    + 데이터 단위 : 패킷(Packet), 전송 주소 : IP 주소
    + 네트워크상 최종 목적지까지 정확하게 연결되로고 연결성 제공
    + 단말을 구분하기 위해 논리적인 주소(Logical Address) IP를 할당
    + 라우팅(Routing) 기능을 처리
    + 패킷 단위의 데이터 
  + [3. 전송 계층 (Transport Layer)]
    + 데이터 단위 : 세그먼트(Segment), 전송 주소 : 포트(Port)
    + 통신 노드 간의 연결 제어 및 자료 송수신을 담당
  + [4. 응용 계층 (Application Layer)]
    + 데이터 단위 : Data / Message
    + 응용 프로그램(Application)들이 데이터를 교환하기 위해 사용되는 프로토콜
    + 사용자 응용 프로그램 인터페이스를 담당
 
## 3. TCP vs UDP
#### 3-1. TCP
  + TCP (Transmission Control Protocol)
    + 인터넷 상에서 데이터를 메세지의 형태(세그먼트 라는 블록 단위)로 보내기 위해 IP와 함게 사용하는 프로토콜
    + TCP와 IP를 함께 사용하는데, IP는 데이터의 배달을 처리, TCP는 패킷을 추적
    + 연결형 서비스로 가상 회선 방식을 제공
      + 3-way handshaking 과정을 통해 연결을 설정, 4-way handshaking을 통해 연결을 해제
    + 흐름 제어 (Flow Control)
      + 수신측이 송신측보다 데이터 처리 속도가 빠르면 문제없지만, 송신측의 속도가 빠를 경우 문제 발생
      + 수신측에서 제한된 저장 용량 초과한 후 도착하는 데이터는 손실 될 수 있으며, 만약 손실시 불필요한 응답, 데이터 전송이 송수신 측간에 빈번이 발생
      + 데이터를 송신하는 곳과 수신하는 곳의 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우 방지
      + 해결 방법
        + Stop and Wait : 매번 전송한 패킷에 대해 확인 응답을 받아야만 다음 패킷을 전송하는 방법
        + Sliding Window (Go Back N ARQ) : 수신측에서 설정한 윈도우 크기만큼 송신측에서 확인 응답없이 세그먼트를 전송할 수 있게 하여 데이터 흐름을 동적으로 조절하는 제어기법
        ```
        * 목적 : 전송은 되었지만, ACK를 받지 못한 byte의 숫자를 파악하기 위해 사용하는 protocol
        (LastByteSent - LastByteAcked <= ReceiveWindowAdvertised)
        마지막에 보내진 바이트 - 마지막에 확인된 바이트 <= 남아있는 공간
        * 동작 방식
          1. 윈도우에 포함되는 모든 패킷을 전송
          2. 그 패킷들의 전달이 확인되는 대로 윈도우를 옆으로 옮김으로써 다음 패킷들을 전송
        ```
    + 혼잡 제어 (Congestion Control)
      + 네트워크 내의 패킷 수가 넘치게 증가하지 않도록 방지
      + 정보의 소통량이 과다하면 패킷을 조금만 전송하여 혼잡 붕괴 현상이 일어나는 것을 방지
      + 해결 방법
        + AIMD (Additive Increase / Multiplicative Decrease)
        + Slow Start (느린 시작)
        + Fast Retransmit (빠른 재전송)
        + Fast Recovery (빠른 회복)
    + 높은 신뢰성을 보장
    + UDP보다 속도가 느림
    + 전이중(Full-Duplex), 점대점(Point to Point) 방식
      + 전이중
        + 전송이 양방향으로 동시에 일어날 수 있다.
      + 점대점
        + 각 연결이 정확히 2개의 종단점을 가지고 있다.
      + 멀티캐스팅이나 브로드캐스팅을 지원하지 않는다.
      ```
      * 유니캐스팅
        - MAC 주소를 기반으로 상대측 IP주소를 목적지로 하는 일대일 통신 방식
      * 멀티캐스팅
        - UDP 기반
        - 하나 이상의 송신자들이 특정한 하나 이상의 수신자들에게 데이터를 전송하는 방식
      * 브로드캐스팅
        - UDP 기반
        - 로컬 랜상에 붙어있는 모든 네트워크 장비들에게 그들의 의사와 상관없이 모두 보내는 방식
      ```
    + 연속성보다 신뢰성있는 전송이 주요할 때에 사용
### 3-2. TCP의 3-way handshake 와 4-way handshake
  + TCP는 장치들 사이에 논리적인 접속을 성립하기 위하여 연결을 설정하여 신뢰성을 보장하는 연결형 서비스
  + 3-way handshake
    + TCP 통신을 이용하여 데이터를 전송하기 위해 네트워크 연결을 설정하는 과정
    + 양쪽 모두 데이터를 전송할 준비가 되었다는 것을 보장, 실제로 데이터 전달이 시작하기 전에 한 쪽이 다른 쪽이 준비되었음을 알 수 있음
    + 즉, TCP/IP 프로토콜을 이용해서 통신을 하는 응용 프로그램이 데이터를 전송하기 전에 먼저 정확한 전송을 보장하기 위해 상대방 컴퓨터와 사전에 세션을 수립하는 과정을 의미
    + 동작 과정
      + A 프로세트(Client)가 B 프로세스(Server)에 연결을 요청
        + 1. A -> B : SYN
          + 접속 요청 프로세스 A가 연결 요청 메시지 전송(SYN)
          + 송신자가 최초로 데이터를 전송할 때 시퀀스 넘버(Sequence Number)를 임의의 랜덤 숫자로 지정, SYN 플래그 비트를 1로 설정한 세그먼트 전송
          + PORT 상태 : A - CLOSED, B : LISTEN
        + 2. B -> A : SYN + ACK
          + 접속 요청을 받은 프로세스 B가 요청을 수락했으며, 접속 요청 프로세스인 A도 포트를 열어 달라는 메시지 전송 (SYN + ACK)
          + 수신자는 Acknowledgement Number 필드를 (Sequence Number + 1)로 지정, SYN과 ACK 플래그 비트를 1로 설정한 세그먼트를 전송
          + PORT 상태 : A : CLOSED, B : SYN_RCV
        + 3. A -> B : ACK
          + 마지막으로 접속 요청 프로세스 A가 수락 확인을 보내 연결을 맺음 (ACK)
          + 데이터 전송이 가능
          + PORT 상태 : A : ESTABLISHED, B : ESTABLISHED
  + 4-way handshake
    + TCP의 연결을 해제하는 과정
      + A 프로세스(Client)가 B 프로세스(Server)에 연결 해제를 요청
        + 1. A -> B : FIN
          + 프로세스 A가 연결을 종료하겠다는 FIN 플래그 전송
          + 프로세스 B가 FIN 플래그로 응답하기 전까지 연결 유지
        + 2. B -> A : ACK
          + 프로세스 B는 일단 확인 메시지 전송 자신의 통신이 끝날 때까지 기다림(이 상태가 TIME_WAIT 상태)
          + 수신자는 Acknowledgement Number 필드를 (Sequence Number + 1)로 지정하고, ACK 플래그 비트를 1로 설정한 세그먼트 전송
          + 자신이 전송할 데이터가 남아있다면 이어서 전송
        + 3. B -> A : FIN
          + 프로세스 B가 통신이 끝나면 연결 종료 요청에 합의한다는 의미로 프로세스 A에게 FIN 플래그 전송
        + 4. A -> B : ACK
          + 프로세스 A는 확인했다는 메시지 전송
  ```
  포트(Port) 상태 정보
    - CLOSED : 포트가 닫힌 상태
    - LISTEN : 포트가 열린 상태로 연결 요청 대기
    - SYN_RCV : SYNC 요청을 받고 상대방의 응답을 기다리는 중
    - ESTABLISHED : 포트 연결 상태
  ```
      
